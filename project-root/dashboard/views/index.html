<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
  <style>
    body { font-family: "Segoe UI", sans-serif; background: #f8f9fa; margin: 0; padding: 20px; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #e9ecef; }
    tr.running { background-color: #d1e7dd; }
    tr.stopped { background-color: #f8d7da; }
  </style>
</head>
<body>
  <h1>ğŸ–¥ï¸ ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
  <table id="statusTable">
    <thead>
      <tr>
        <th>ãƒ›ã‚¹ãƒˆå</th>
        <th>ãƒ—ãƒ­ã‚»ã‚¹å</th>
        <th>çŠ¶æ…‹</th>
        <th>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    async function loadStatus() {
      const res = await fetch("/api/status");
      const data = await res.json();
      const tbody = document.querySelector("#statusTable tbody");
      tbody.innerHTML = "";

      data.forEach(item => {
        const tr = document.createElement("tr");
        tr.className = item.running ? "running" : "stopped";
        tr.innerHTML = `
          <td>${item.hostname}</td>
          <td>${item.process}</td>
          <td>${item.running ? "ç¨¼åƒä¸­ âœ…" : "åœæ­¢ä¸­ âŒ"}</td>
          <td>${item.message}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    loadStatus();
    setInterval(loadStatus, 10000); // 10ç§’ã”ã¨ã«ç”»é¢æ›´æ–°
  </script>
</body>
</html>
